{
  "data" : {
    "model" : {
      "gaMetrics" : [ ],
      "gaDimensions" : [ ],
      "dateRanges" : [ {
        "fromDate" : "2023-01-02",
        "toDate" : "2023-02-03"
      } ],
      "includeDateRangeNameColumn" : true,
      "gaDimensionFilter" : {
        "connectVia" : "AND",
        "filters" : [ ]
      },
      "keepEmptyRows" : false,
      "returnResponseMetadata" : false,
      "returnPropertyQuota" : false
    }
  },
  "schema" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "currencyCode" : {
            "type" : "string",
            "title" : "Currency code",
            "description" : "<p>\nSpecify the currency code to use for currency returning metrics, to be stated in three letter\nISO-4217 format. If it is left empty, the report uses the property&apos;s default currency.\n</p>\n"
          },
          "dateRanges" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "fromDate" : {
                  "type" : "string",
                  "format" : "date",
                  "title" : "From date",
                  "description" : "The inclusive start date for the query, not after the end date.\n"
                },
                "rangeName" : {
                  "type" : "string",
                  "title" : "Name (optional)",
                  "description" : "A custom name for the date range to which the dimension <tt>dateRange</tt> is valued.\nIf no name is given, Google Analytics automatically names each date range based on their index:\n<tt>date_range_0</tt>, <tt>date_range_1</tt>, etc.\n\n<b>Note:</b> The custom name must not start with \"date_range_\" or \"RESERVED_\".\n"
                },
                "toDate" : {
                  "type" : "string",
                  "format" : "date",
                  "title" : "To date",
                  "description" : "The inclusive end date for the query, not before the start date."
                }
              }
            },
            "title" : "Date ranges",
            "description" : "<p>\nA date range specifies the range of dates for which to request event data from Google Analytics.\n</p>\n<p>\nSpecify at least one and up to four date ranges for which event data will be requested.\nThe custom name given to a date range replaces the date range name which is auto-generated by\nGoogle Analytics.\n</p>\n",
            "default" : [ {
              "fromDate" : "2023-01-02",
              "toDate" : "2023-02-03"
            } ]
          },
          "gaDimensionFilter" : {
            "type" : "object",
            "properties" : {
              "connectVia" : {
                "oneOf" : [ {
                  "const" : "AND",
                  "title" : "All criteria"
                }, {
                  "const" : "OR",
                  "title" : "Any criterion"
                } ],
                "title" : "Filter if matched by",
                "description" : "Output the event if it is matched by:\n<ul>\n    <li><b>All criteria</b>: an event is included if it is matched by <i>all</i> of the criteria\n    (intersection of matches)</li>\n    <li><b>Any criterion</b>: an event is included if it is matched by <i>at least one</i> of the\n    criteria (union of matches)</li>\n</ul>\n",
                "default" : "AND"
              },
              "filters" : {
                "type" : "array",
                "items" : {
                  "type" : "object",
                  "properties" : {
                    "caseSensitivity" : {
                      "oneOf" : [ {
                        "const" : "CASE_INSENSITIVE",
                        "title" : "Case insensitive"
                      }, {
                        "const" : "CASE_SENSITIVE",
                        "title" : "Case sensitive"
                      } ],
                      "title" : "Case handling",
                      "description" : "Specifies whether strings should be matched case-insensitive or case-sensitive.\n",
                      "default" : "CASE_INSENSITIVE"
                    },
                    "isNegated" : {
                      "type" : "boolean",
                      "title" : "Invert matches",
                      "description" : "Invert results matched by the criterion in order to <i>exclude</i> certain events from the result.\n",
                      "default" : false
                    },
                    "name" : {
                      "type" : "string",
                      "title" : "Dimension",
                      "description" : "The name of the dimension to filter on."
                    },
                    "stringFilter" : {
                      "type" : "object",
                      "properties" : {
                        "matchType" : {
                          "oneOf" : [ {
                            "const" : "EXACT",
                            "title" : "Exact"
                          }, {
                            "const" : "BEGINS_WITH",
                            "title" : "Begins with"
                          }, {
                            "const" : "ENDS_WITH",
                            "title" : "Ends with"
                          }, {
                            "const" : "CONTAINS",
                            "title" : "Contains"
                          }, {
                            "const" : "FULL_REGEXP",
                            "title" : "Regular expression (full match)"
                          }, {
                            "const" : "PARTIAL_REGEXP",
                            "title" : "Regular expression (partial match)"
                          } ],
                          "title" : "String matching",
                          "description" : "Specify how the string value is matched with the dimension value.\n<ul>\n    <li><b>Exact:</b> the string value must match the dimension value exactly\n    </li>\n    <li><b>Begins with:</b> the dimension value must begin with the string value\n    </li>\n    <li><b>Ends with:</b> the dimension value must end with the string value\n    </li>\n    <li><b>Contains:</b> the dimension value must contain the string value\n    </li>\n    <li><b>Regular expression (full match):</b> the string value is interpreted as a regular expression and\n        must match the dimension value completely\n    </li>\n    <li><b>Regular expression (partial match):</b> the string value is interpreted as a regular expression\n        and must match the dimension value at least partially\n    </li>\n</ul>\n",
                          "default" : "CONTAINS"
                        },
                        "value" : {
                          "type" : "string",
                          "title" : "String value",
                          "description" : "Specify the string value to match to the dimension value."
                        }
                      }
                    }
                  }
                },
                "title" : "Dimension filter",
                "description" : "<p>\nData can be filtered by comparing dimension values to strings or based on list inclusion.\n</p>\n<p>\nEach filter criterion can be negated to invert its results, for example to <i>exclude</i> results whose\ndimension values are in the specified list.\nThe dimension filter can be configured such that <i>all</i> criteria\nmust match for a result to be returned, or such that <i>any</i> criterion must match.\n</p>\n",
                "default" : [ ]
              }
            },
            "default" : {
              "connectVia" : "AND",
              "filters" : [ ]
            }
          },
          "gaDimensions" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "name" : {
                  "type" : "string",
                  "title" : "Dimension",
                  "description" : "Specify the name of the dimension to request.\nFor example, the dimension \"city\" indicates the city from which an event originates.\nDimension values in report data are always strings; for example, the city could be \"Paris\" or\n\"New York\".\nAvailable names can be seen in the <a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/api-schema?hl=en#dimensions\">list of dimensions</a> under the column \"API Name\"."
                }
              }
            },
            "title" : "Dimensions",
            "description" : "<p>\nDimensions are attributes of the event data and their values are always strings.\n</p>\n<p>\nSpecify up to nine dimensions by name. Available dimension names can be seen in the\n<a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/api-schema?hl=en#dimensions\">list of dimensions</a> under the column &quot;API Name&quot;.\n</p>\n",
            "default" : [ ]
          },
          "gaMetrics" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "name" : {
                  "type" : "string",
                  "title" : "Metric",
                  "description" : "Specify the name of the metric.\nFor example, the metric \"eventCount\" is the total number of events.\n\nAvailable metric names can be seen in the\n<a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/api-schema?hl=en#metrics\">list of metrics</a> under the column \"API Name\".\n"
                }
              }
            },
            "title" : "Metrics",
            "description" : "<p>\nMetrics are quantitative measurements of event data for your Google Analytics property.\n</p>\n<p>\nSpecify at least one and up to ten metrics to include in your query.\nMetrics can be specified by name and either be built-in metrics or custom metrics defined in your property.\n</p>\n<p>\nBuilt-in metrics can be seen in the <a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/api-schema?hl=en#metrics\">list of metrics</a> under the column &quot;API Name&quot;.\n</p>\n",
            "default" : [ ]
          },
          "includeDateRangeNameColumn" : {
            "type" : "boolean",
            "title" : "Include date range name column",
            "description" : "<p>\nInclude a column containing date range names. If a date range is not given a name\nexplicitly, Google Analytics will auto-generate a unique name for each date range.\n</p>\n",
            "default" : true
          },
          "keepEmptyRows" : {
            "type" : "boolean",
            "title" : "Keep empty rows",
            "description" : "If enabled, rows will also be returned if all their metrics are equal to 0.\nOtherwise they are omitted from the result.\n",
            "default" : false
          },
          "returnPropertyQuota" : {
            "type" : "boolean",
            "title" : "Output property quotas as flow variables",
            "description" : "<p>\nIf enabled, outputs the Google Analytics property quotas as flow variables.\nEach quota will indicate the \"consumed\" and \"remaining\" tokens after the last API request made by the node.\nThe format of the flow variable name follows the pattern\n<tt>analytics.quota.$QUOTA.$TYPE</tt>, where <tt>$QUOTA</tt> specifies the quota and <tt>$TYPE</tt>\nis either \"consumed\" or \"remaining\".\nAvailable quotas can be seen in the <a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/quotas?hl=en\">API documentation</a>.</p><p><b>Note:</b> Retrieving a lot of data (many rows, many columns, or long date ranges) or specifying complex\nfilter criteria may be responsible for consumption of many tokens per node execution.</p>\n",
            "default" : false
          },
          "returnResponseMetadata" : {
            "type" : "boolean",
            "title" : "Output response metadata as flow variables",
            "description" : "<p>\nIf enabled, outputs response metadata from the Google Analytics API as flow variables.\nIn particular, the following fields are returned: <tt>dataLossFromOtherRow</tt>,\n<tt>currencyCode</tt>, <tt>timeZone</tt>, <tt>emptyReason</tt>, <tt>subjectToThresholding</tt>.\nThe format of the flow variable name follows the pattern <tt>analytics.response.$FIELD</tt>,\nwhere <tt>$FIELD</tt> specifies the field name.\n</p>\n<p>\nMore information can be obtained from the\n<a href=\"https://developers.google.com/analytics/devguides/reporting/data/v1/rest/v1beta/ResponseMetaData?hl=en\">API documentation</a>.</p>",
            "default" : false
          }
        }
      }
    }
  },
  "ui_schema" : {
    "elements" : [ {
      "label" : "Metrics",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/gaMetrics",
        "options" : {
          "detail" : [ {
            "type" : "Control",
            "scope" : "#/properties/name",
            "options" : {
              "format" : "dropDown"
            },
            "providedOptions" : [ "possibleValues" ]
          } ],
          "elementLayout": "HORIZONTAL_SINGLE_LINE",
          "addButtonText" : "Add metric",
          "showSortButtons" : true
        }
      } ]
    }, {
      "label" : "Dimensions",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/gaDimensions",
        "options" : {
          "detail" : [ {
            "type" : "Control",
            "scope" : "#/properties/name",
            "options" : {
              "format" : "dropDown"
            },
            "providedOptions" : [ "possibleValues" ]
          } ],
          "elementLayout": "HORIZONTAL_SINGLE_LINE",
          "addButtonText" : "Add dimension",
          "showSortButtons" : true
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/dateRanges",
        "options" : {
          "detail" : [ {
            "type" : "HorizontalLayout",
            "elements" : [ {
              "type" : "Control",
              "scope" : "#/properties/fromDate",
              "options" : {
                "format" : "localDate"
              }
            }, {
              "type" : "Control",
              "scope" : "#/properties/toDate",
              "options" : {
                "format" : "localDate"
              }
            }, {
              "type" : "Control",
              "scope" : "#/properties/rangeName",
              "options" : {
                "validation" : {
                  "pattern" : {
                    "parameters" : {
                      "pattern" : "(?!date_range_|RESERVED_).*"
                    },
                    "errorMessage" : "The name must not start with \"date_range_\" or \"RESERVED_\""
                  }
                }
              }
            } ]
          } ],
          "elementLayout": "HORIZONTAL_SINGLE_LINE",
          "addButtonText" : "Add date range"
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/includeDateRangeNameColumn",
        "options" : {
          "format" : "checkbox",
          "isAdvanced" : true
        }
      } ]
    }, {
      "label" : "Dimension filter",
      "type" : "Section",
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/gaDimensionFilter/properties/connectVia",
        "options" : {
          "format" : "valueSwitch"
        },
        "rule" : {
          "effect" : "SHOW",
          "condition" : {
            "scope" : "#/properties/model/properties/gaDimensionFilter/properties/filters",
            "schema" : {
              "minItems" : 2
            }
          }
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/gaDimensionFilter/properties/filters",
        "options" : {
          "detail" : [ {
            "type" : "Control",
            "scope" : "#/properties/name",
            "options" : {
              "format" : "dropDown"
            },
            "providedOptions" : [ "possibleValues" ]
          }, {
            "type" : "Control",
            "scope" : "#/properties/isNegated",
            "options" : {
              "format" : "checkbox"
            }
          }, {
            "type" : "Control",
            "scope" : "#/properties/caseSensitivity",
            "options" : {
              "isAdvanced" : true,
              "format" : "valueSwitch"
            }
          }, {
            "type" : "Control",
            "scope" : "#/properties/stringFilter/properties/matchType"
          }, {
            "type" : "Control",
            "scope" : "#/properties/stringFilter/properties/value"
          } ],
          "addButtonText" : "Add filter criterion",
          "arrayElementTitle" : "Criterion"
        }
      } ]
    }, {
      "label" : "Output",
      "type" : "Section",
      "options" : {
        "isAdvanced" : true
      },
      "elements" : [ {
        "type" : "Control",
        "scope" : "#/properties/model/properties/currencyCode",
        "options" : {
          "validation" : {
            "pattern" : {
              "parameters" : {
                "pattern" : "$|[a-zA-Z]{3}"
              },
              "errorMessage" : "The string must be empty or in the three letter ISO-4217 format."
            }
          },
          "isAdvanced" : true
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/keepEmptyRows",
        "options" : {
          "format" : "checkbox",
          "isAdvanced" : true
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/returnResponseMetadata",
        "options" : {
          "format" : "checkbox",
          "isAdvanced" : true
        }
      }, {
        "type" : "Control",
        "scope" : "#/properties/model/properties/returnPropertyQuota",
        "options" : {
          "format" : "checkbox",
          "isAdvanced" : true
        }
      } ]
    } ]
  },
  "persist" : {
    "type" : "object",
    "properties" : {
      "model" : {
        "type" : "object",
        "properties" : {
          "gaMetrics" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "name" : { }
              }
            }
          },
          "gaDimensions" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "name" : { }
              }
            }
          },
          "dateRanges" : {
            "type" : "array",
            "items" : {
              "type" : "object",
              "properties" : {
                "fromDate" : { },
                "toDate" : { },
                "rangeName" : { }
              }
            }
          },
          "includeDateRangeNameColumn" : { },
          "gaDimensionFilter" : {
            "type" : "object",
            "properties" : {
              "connectVia" : { },
              "filters" : {
                "type" : "array",
                "items" : {
                  "propertiesConfigPaths" : [ [ "name" ], [ "caseSensitivity" ], [ "isNegated" ], [ "matchType" ], [ "value" ] ]
                }
              }
            }
          },
          "currencyCode" : { },
          "keepEmptyRows" : { },
          "returnResponseMetadata" : { },
          "returnPropertyQuota" : { }
        }
      }
    }
  },
  "globalUpdates" : [ {
    "trigger" : {
      "id" : "after-open-dialog"
    },
    "triggerInitially" : true,
    "dependencies" : [ ]
  } ]
}